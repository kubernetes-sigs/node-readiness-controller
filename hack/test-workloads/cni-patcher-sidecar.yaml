name: cni-status-patcher
# TODO: Update to use the new reporter image once published
image: ghcr.io/ajaysundark/readiness-condition-reporter:0.1.1
imagePullPolicy: IfNotPresent
env:
  - name: NODE_NAME
    valueFrom:
      fieldRef:
        fieldPath: spec.nodeName
  - name: CHECK_ENDPOINT
    value: "http://localhost:9099/readiness"
  - name: CONDITION_TYPE
    value: "network.k8s.io/CalicoReady"
  - name: CHECK_INTERVAL
    value: "5s"
resources:
  limits:
    cpu: "10m"
    memory: "32Mi"
  requests:
    cpu: "10m"
    memory: "32Mi"